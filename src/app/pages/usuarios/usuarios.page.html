<ion-header [translucent]="true">
  <ion-toolbar color="primary">
    <ion-buttons slot="start">
      <ion-menu-button></ion-menu-button>
    </ion-buttons>
    <ion-title>{{ folder() }}</ion-title>
  </ion-toolbar>
</ion-header>

<ion-content [fullscreen]="true">
  <ion-header collapse="condense">
    <ion-toolbar>
      <ion-title size="large">{{ folder() }}</ion-title>
    </ion-toolbar>

  </ion-header>
  <ion-searchbar placeholder="Buscar usuario" [(ngModel)]="searchUsers" [debounce]="1000" (ionInput)="filterUsers()"></ion-searchbar>

  <div class="main-text-container ion-flex-column">
      <ion-text><h2>Reporte de todos los usuarios de Mecodex</h2></ion-text>
      <ion-text><h3>Cantidad de usuarios con plan PRO PLUS: </h3></ion-text>
      <ion-text>Cantidad de usuarios con plan PRO PLUS:</ion-text>
      <ion-text>Cantidad de usuarios con plan PRO:</ion-text>
      <ion-text>Cantidad de usuarios con plan LITE:</ion-text>
  </div>

  <!-- Verifica si el array de usuarios está vacío -->
  @if (usuarios().length === 0) {
    <div class="card-not-found">
      <app-not-found [title]="'usuario de Mecodex'" [firstValue]="searchUsers()"></app-not-found>
    </div>
  } @else {
    <!-- Mostrar usuarios si los hay -->
    @for (usuario of usuarios(); track usuario.id; let i = $index) {
      <ion-card class="ion-margin-top card-hover user-card" [routerLink]="['/usuario', usuario.id]">
        <ion-card-content class="ion-padding">
          <ion-grid [fixed]="true">
            <ion-row class="ion-align-items-stretch">

              <!-- Col 1: Imagen -->
              <ion-col size="12" size-md="4" class="ion-text-center img-ion-col ion-align-items-center">
                <ion-thumbnail class="thumb-cover">
                  <img
                    alt="A silloute of a user"
                    src="../../../assets/icon/user-group-solid.svg"
                  />
                </ion-thumbnail>
              </ion-col>

              <!-- Col 2: Nombre / Contacto / Email -->
              <ion-col size="12" size-md="4" class="meta">
                <h6>Id usuario: {{ usuario.id }} </h6>
                <ion-item lines="none" aria-label="favorite">
                  <!-- Icono de persona antes del nombre - usar el nombre del icono directamente -->
                  <ion-icon slot="start" color="primary" name="person-outline" aria-hidden="true"></ion-icon>
                  <ion-label>
                    <ion-text><strong>Nombre:</strong> {{ usuario.nombre | titlecase }} {{ usuario.apellido | titlecase }} </ion-text>
                  </ion-label>
                </ion-item>

                <ion-item lines="none" aria-label="favorite">
                  <ion-icon slot="start" color="primary" name="call-outline" aria-hidden="true"></ion-icon>
                  <ion-label>
                    <ion-text><strong>Contacto:</strong> {{ usuario.telefono }}</ion-text>
                  </ion-label>
                </ion-item>

                <ion-item lines="none" aria-label="favorite">
                  <ion-icon slot="start" color="primary" name="mail-outline" aria-hidden="true"></ion-icon>
                  <ion-label>
                    <ion-text class="wrap"><strong>Email:</strong> {{ usuario.correo | lowercase }}</ion-text>
                  </ion-label>
                </ion-item>
                
              </ion-col>

              <!-- Col 3: Documento / Plan / País -->
              <ion-col size="12" size-md="4" class="meta">
                <ion-item lines="none" aria-label="favorite">
                  <ion-icon slot="start" color="primary" name="document-text-outline" aria-hidden="true"></ion-icon>
                  <ion-label>
                    <ion-text><strong>Documento:</strong> {{ usuario.documento }}</ion-text>
                  </ion-label>
                </ion-item>

                <ion-item lines="none" aria-label="favorite">
                  <ion-icon slot="start" color="primary" name="card-outline" aria-hidden="true"></ion-icon>
                  <ion-label>
                    <ion-text><strong>Plan:</strong> {{ usuario.PLAN_MECODEX || "N/A"}}</ion-text>
                  </ion-label>
                </ion-item>

                <ion-item lines="none" aria-label="favorite">
                  <ion-icon slot="start" color="primary" name="globe-outline" aria-hidden="true"></ion-icon>
                  <ion-label>
                    <ion-text><strong>País:</strong> {{ usuario.pais_nombre }}</ion-text>
                  </ion-label>
                </ion-item>

              </ion-col>

            </ion-row>
          </ion-grid>
        </ion-card-content>
      </ion-card>
    }
  }


</ion-content>
